<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>鸿合图书管理系统</title>
    <link rel="stylesheet" type="text/css" href="/stylesheets/easyui-themes/default/easyui.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/easyui-themes/icon.css">
    <script type="text/javascript" src="/javascripts/jquery-1.11.3.js"></script>
    <script type="text/javascript" src="/javascripts/jquery.easyui.min.js"></script>
    <script type="text/javascript" src="/javascripts/easyui-lang-zh_CN.js"></script>
    <script type="text/javascript" src="/javascripts/dateFormat.js"></script>

</head>
<body class="easyui-layout">
<div data-options="region:'north',border:false" style="height:60px;background:#B3DFDA;padding:10px">鸿合图书管理系统
    <p><%=user.name%><a href="/login/logout">退出登录</a></p>
</div>
<div data-options="region:'west',split:true,title:'菜单'" style="width:150px;padding:10px;">
    <ul id="main_tree_menu" class="easyui-tree"></ul>
</div>
<div data-options="region:'east',split:true,collapsed:true,title:'East'" style="width:100px;padding:10px;">east region
</div>
<div data-options="region:'south',border:false" style="height:50px;background:#A9FACD;padding:10px;">south region</div>
<div id="main_layout_center" class="easyui-tabs" data-options="region:'center',onSelect:function(title,index){
    $(this).find('.tabs-panels').children().eq(index).find('.datagrid-f').datagrid('reload');
}" style="padding: 0px;">
</div>
<script>
    $(function () {
        $.ajaxSetup({cache:false});

        var tree_data = [{
            "id": 1,
            "text": "图书信息",
            "url": "/booksQuery/index"
        },{
            "id": 2,
            "text": "用户管理",
            "url": "/users/index"
        },{
            "id": 3,
            "text": "图书管理",
            "url": "/books/index"
        },{
            "id": 4,
            "text": "借阅记录",
            "url": "/records/index"
        },{
            "id": 5,
            "text": "图书借阅",
            "url": "/borrow/index"
        },{
            "id": 6,
            "text": "图书归还",
            "url": "/return/index"
        }];
        initUI();
        function initUI() {
            $('#main_tree_menu').tree({
                data: tree_data,
                animate: true,
                onClick: function (node) {
                    if (node.text && node.url) {
                        openTab(node.text, node.url);
                    }
                }
            });
            openTab('欢迎使用','/welcome');
        }

        function openTab(title, url) {
            var $tt = $('#main_layout_center');
            if (!$tt.tabs('exists', title)) {
                $tt.tabs('add', {
                    title: title,
                    href: url,
                    closable: true,
                    fit:true,
                    plain:true
                });
            } else {
                $tt.tabs('select', title)
            }

        }

    });
</script>
</body>
</html>
